!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ReporterPb=t()}(this,(function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function t(e,t,r,i,n,o,a){try{var s=e[o](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(i,n)}function r(e){return function(){var r=this,i=arguments;return new Promise((function(n,o){var a=e.apply(r,i);function s(e){t(a,n,o,s,u,"next",e)}function u(e){t(a,n,o,s,u,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f(i.key),i)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function s(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(){c=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,i){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new I(i||[]);return n(a,"_invoke",{value:P(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",v="suspendedYield",w="executing",h="completed",b={};function m(){}function g(){}function _(){}var y={};l(y,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==r&&i.call(x,a)&&(y=x);var F=_.prototype=m.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(n,o,a,s){var u=f(e[n],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var o;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){r(e,i,t,n)}))}return o=o?o.then(n,n):n()}})}function P(t,r,i){var n=p;return function(o,a){if(n===w)throw Error("Generator is already running");if(n===h){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var u=O(s,i);if(u){if(u===b)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===p)throw n=h,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=w;var l=f(t,r,i);if("normal"===l.type){if(n=i.done?h:v,l.arg===b)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=h,i.method="throw",i.arg=l.arg)}}}function O(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),b;var o=f(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function V(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(V,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return g.prototype=_,n(F,"constructor",{value:_,configurable:!0}),n(_,"constructor",{value:g,configurable:!0}),g.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(F),e},t.awrap=function(e){return{__await:e}},S(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new E(d(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(F),l(F,u,"Generator"),l(F,a,(function(){return this})),l(F,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=M,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:M(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),b}},t}function d(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(t,r){if(t){if("string"==typeof t)return e(t,r);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,r):void 0}}function w(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){return t.reject(r)}))}))}function h(e){return new this((function(t,r){if(!e||void 0===e.length)return r(new TypeError(p(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var n=i.length;function o(e,r){if(r&&("object"===p(r)||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,(function(t){o(e,t)}),(function(r){i[e]={status:"rejected",reason:r},0==--n&&t(i)}))}i[e]={status:"fulfilled",value:r},0==--n&&t(i)}for(var a=0;a<i.length;a++)o(a,i[a])}))}function b(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}function m(e){var t=this;return new t((function(r,i){if(!e||void 0===e.length)return i(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return i();for(var o=[],a=0;a<n.length;a++)try{t.resolve(n[a]).then(r).catch((function(e){o.push(e),o.length===n.length&&i(new b(o,"All promises were rejected"))}))}catch(e){i(e)}}))}b.prototype=Error.prototype;var g=setTimeout;function _(e){return Boolean(e&&void 0!==e.length)}function y(){}function k(e){if(!(this instanceof k))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],O(e,this)}function x(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,k._immediateFn((function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var i;try{i=r(e._value)}catch(e){return void S(t.promise,e)}F(t.promise,i)}else(1===e._state?F:S)(t.promise,e._value)}))):e._deferreds.push(t)}function F(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===p(t)||"function"==typeof t)){var r=t.then;if(t instanceof k)return e._state=3,e._value=t,void E(e);if("function"==typeof r)return void O((i=r,n=t,function(){i.apply(n,arguments)}),e)}e._state=1,e._value=t,E(e)}catch(t){S(e,t)}var i,n}function S(e,t){e._state=2,e._value=t,E(e)}function E(e){2===e._state&&0===e._deferreds.length&&k._immediateFn((function(){e._handled||k._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)x(e,e._deferreds[t]);e._deferreds=null}function P(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function O(e,t){var r=!1;try{e((function(e){r||(r=!0,F(t,e))}),(function(e){r||(r=!0,S(t,e))}))}catch(e){if(r)return;r=!0,S(t,e)}}k.prototype.catch=function(e){return this.then(null,e)},k.prototype.then=function(e,t){var r=new this.constructor(y);return x(this,new P(e,t,r)),r},k.prototype.finally=w,k.all=function(e){return new k((function(t,r){if(!_(e))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var n=i.length;function o(e,a){try{if(a&&("object"===p(a)||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){o(e,t)}),r)}i[e]=a,0==--n&&t(i)}catch(e){r(e)}}for(var a=0;a<i.length;a++)o(a,i[a])}))},k.any=m,k.allSettled=h,k.resolve=function(e){return e&&"object"===p(e)&&e.constructor===k?e:new k((function(t){t(e)}))},k.reject=function(e){return new k((function(t,r){r(e)}))},k.race=function(e){return new k((function(t,r){if(!_(e))return r(new TypeError("Promise.race accepts an array"));for(var i=0,n=e.length;i<n;i++)k.resolve(e[i]).then(t,r)}))},k._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){g(e,0)},k._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var V=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof V.Promise?V.Promise=k:(V.Promise.prototype.finally||(V.Promise.prototype.finally=w),V.Promise.allSettled||(V.Promise.allSettled=h),V.Promise.any||(V.Promise.any=m));var T="1.2.0",I=function(){return o((function e(t){i(this,e),s(this,"batched",[]),s(this,"timeout",0),this.options=t}),[{key:"add",value:function(e){this.batched.push(e),this.check()}},{key:"flush",value:(e=r(c().mark((function e(){var t,r,i,n,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.timeout&&clearTimeout(this.timeout),this.timeout=0,this.batched.length&&(t=this.batched,this.batched=[],t.length)){for(i=a.length,n=new Array(i),o=0;o<i;o++)n[o]=a[o];(r=this.options).run.apply(r,[t].concat(n))}case 3:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"check",value:function(){var e=this;this.batched.length>=this.options.batchSize?this.flush():0===this.timeout&&(this.timeout=window.setTimeout((function(){return e.flush()}),this.options.batchTime))}}]);var e}(),M=function(){return o((function e(){i(this,e),s(this,"current",0),s(this,"currentTime",Date.now())}),[{key:"get",value:function(){return this.current+=1,this.currentTime=Date.now(),{sn:this.current,time:this.currentTime}}}])}(),j=function(e){var t=function(t){var r,i=null==t||null===(r=t.match)||void 0===r?void 0:r.call(t,new RegExp("(^|&)"+e+"=([^&]*)(&|$)"));return null!=i&&i[2]?decodeURIComponent(i[2]):null},r=window.location.search.slice(1),i=window.location.hash.split("?")[1]||"";if(r){var n=t(r);if(n)return n}if(i){var o=t(i);if(o)return o}return null},C=function(e,t){var r=e.indexOf("?"),i=[];for(var n in t)i.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));var o="".concat(r>0?"&":"?").concat(i.join("&")),a=e.indexOf("#");return a>0?e.slice(0,a)+o+e.slice(a):e+o},L=function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),r=document.cookie.match(t);return null!=r&&r[2]?decodeURIComponent(r[2]):null},q=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"same-domain",n=new Date;n.setTime(n.getTime()+1e3*r);var o=r>0?";expires="+n.toUTCString():"";return"same-domain"===i&&(i="."+document.domain.split(".").slice(-2).join(".")),document.cookie=e+"="+encodeURIComponent(t)+o+(i?";domain=".concat(i,";path=/"):""),t},N=function(e){for(var t=document.getElementsByTagName("meta"),r=0;r<t.length;r++)if(t[r].getAttribute("name")===e)return t[r].getAttribute("content");return null},A=function(e){for(var t="",r=0;r<e;r++)t+=Math.floor(16*Math.random()).toString(16).toUpperCase();return t},B=function(e){return"object"===p(e)&&!Array.isArray(e)},R=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(!r.length)return e;var n=r.shift();if(B(n))for(var o in n)B(n[o])?(e[o]||(e[o]={}),R(e[o],n[o])):e[o]=n[o];return R.apply(void 0,[e].concat(r))},D=function(e,t){return"boolean"==typeof t?{enabled:t,value:e.value}:"object"===p(t)&&t?{enabled:!0,value:R({},e.value,t)}:e},U=function(e,t){var r={},i={},n=function(n){t.some((function(e){return e===n}))&&void 0!==e[n]&&null!==e[n]?r[n]=e[n]:i[n]=e[n]};for(var o in e)n(o);return{selected:r,remain:i}},z=function(e){var t={};for(var r in e){var i,n;if(void 0!==e[r]&&null!==e[r])if("object"===p(e[r]))try{t[r]=JSON.stringify(e[r])}catch(i){var o,a;t[r]=(null===(o=(a=e[r]).toString)||void 0===o?void 0:o.call(a))||""}else t[r]=(null===(i=(n=e[r]).toString)||void 0===i?void 0:i.call(n))||""}return t},G=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))},W=function(e){var t={};for(var r in e)t[G(r)]=e[r];return t},H=function(e){return new Promise((function(t){var r=document.createElement("script");r.crossOrigin="anonymous",r.type="text/javascript",r.src=e,r.onload=function(){return t()},document.body.appendChild(r)}))},Q=function(e){var t,r;return null!==(t=null===(r=window.__ReporterPbGlobalState)||void 0===r?void 0:r[e])&&void 0!==t?t:null},Z=function(e,t){window.__ReporterPbGlobalState||(window.__ReporterPbGlobalState={}),window.__ReporterPbGlobalState[e]=t},$=function(){var e=L("b_lsid")||"";if(function(e){var t,r=parseInt((null===(t=e.split("_"))||void 0===t?void 0:t[1])||"",16)||0;if(r+54e5<Date.now())return!1;var i=new Date(r);i.setHours(0,0,0,0);var n=new Date;return n.setHours(0,0,0,0),i.getTime()===n.getTime()&&void 0}(e)){var t=Date.now().toString(16).toUpperCase(),r="".concat(A(8),"_").concat(t);return q("b_lsid",r,0,"same-domain"),r}return e},X=function(){var e,t,r=((t=j("bsource"))?(q("bsource_origin",t),{bsource:t,bsourceFrom:"url"}):null)||function(){var e=j("share_source");if(!e)return null;q("share_source_origin",e);var t={WEIXIN:"share_source_weixinchat",WEIXIN_MONMENT:"share_source_weixin_moments",WEIXIN_MONMENTS:"share_source_weixin_moments",QQ:"share_source_qqchat",QZONE:"share_source_qzone",QQZONE:"share_source_qzone",SINA:"share_source_weibo",WEIBO:"share_source_weibo",COPY:"share_source_copy_link",COPY_LINK:"share_source_copy_link",GENERIC:"share_source_more",MORE:"share_source_more",WEIBO_WEB:"share_source_weibo_web",QQ_WEB:"share_source_qqchat_web",QZONE_WEB:"share_source_qzone_web",TIEBA_WEB:"share_source_tieba_web",COPY_WEB:"share_source_copylink_web",WEIXIN_WEB:"share_source_weixinchat_web",ONPHONE_WEB:"share_source_onphone_web"}[e.toUpperCase()]||"";return t?{bsource:t,bsourceFrom:"share"}:null}()||function(){var e=document.referrer,t={search_360:/(.)*((baike.so.com)|(m.image.so.com)|(m.so.com)|(m.video.so.com)|(www.so.com))/,search_baidu:/(.)*\.baidu.com/,search_google:/(.)*\.google.com/,search_sm:/(.)*\.sm.cn/,search_sougo:/(.)*((m.soso.com)|(www.soso.com)|(\.sogou.com))/,search_bing:/(.)*\.bing.com/,search_yahoo:/(.)*\.yahoo.com/};for(var r in t)if(t[r].test(e))return{bsource:r,bsourceFrom:"refer"};return null}()||((e=L("bsource"))?{bsource:e,bsourceFrom:"cookie"}:null)||function(){var e={baiduspider:/Baiduspider/,qqlive:/QQLive/i,qq:/QQ\/([\d\.]+)/i,qqbrowser_app:/MQQBrowser/i,weibo:/Weibo/i,wechat:/MicroMessenger/i,bdbox:/baiduboxapp/i,iqiyi_video_app:/iqiyi/i,uc_browser_app:/UCBrowser/i,xiaomiqjs:/MiuiQuickSearchBox/,zhihu:/ZhihuHybrid/i},t=navigator.userAgent;for(var r in e)if(e[r].test(t))return{bsource:r,bsourceFrom:"ua"};return null}()||{bsource:"",bsourceFrom:""};return r.bsource&&q("bsource",r.bsource),r},Y=function(){var e=parseInt(N("spm_ptype")||"")||0;if(e)return e;var t=navigator.userAgent.toLowerCase(),r=!!t.match(/ipad/i),i=!!t.match(/iphone os/i),n=!!t.match(/midp/i),o=!!t.match(/rv:1.2.3.4/i),a=!!t.match(/ucweb/i),s=!!t.match(/android/i),u=!!t.match(/windows ce/i),l=!!t.match(/windows mobile/i);return r||i||n||o||a||s||u||l?2:1},J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K={exports:{}};!function(e,t){!function(r,i){var n="function",o="undefined",a="object",s="string",u="major",l="model",c="name",d="type",f="vendor",v="version",w="architecture",h="console",b="mobile",m="tablet",g="smarttv",_="wearable",y="embedded",k="Amazon",x="Apple",F="ASUS",S="BlackBerry",E="Browser",P="Chrome",O="Firefox",V="Google",T="Huawei",I="LG",M="Microsoft",j="Motorola",C="Opera",L="Samsung",q="Sharp",N="Sony",A="Xiaomi",B="Zebra",R="Facebook",D="Chromium OS",U="Mac OS",z=" Browser",G=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},W=function(e,t){return p(e)===s&&-1!==H(t).indexOf(H(e))},H=function(e){return e.toLowerCase()},Q=function(e,t){if(p(e)===s)return e=e.replace(/^\s\s*/,""),p(t)===o?e:e.substring(0,500)},Z=function(e,t){for(var r,o,s,u,l,c,d=0;d<t.length&&!l;){var f=t[d],v=t[d+1];for(r=o=0;r<f.length&&!l&&f[r];)if(l=f[r++].exec(e))for(s=0;s<v.length;s++)c=l[++o],p(u=v[s])===a&&u.length>0?2===u.length?p(u[1])==n?this[u[0]]=u[1].call(this,c):this[u[0]]=u[1]:3===u.length?p(u[1])!==n||u[1].exec&&u[1].test?this[u[0]]=c?c.replace(u[1],u[2]):i:this[u[0]]=c?u[1].call(this,c,u[2]):i:4===u.length&&(this[u[0]]=c?u[3].call(this,c.replace(u[1],u[2])):i):this[u]=c||i;d+=2}},$=function(e,t){for(var r in t)if(p(t[r])===a&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(W(t[r][n],e))return"?"===r?i:r}else if(W(t[r],e))return"?"===r?i:r;return t.hasOwnProperty("*")?t["*"]:e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,v],[/opios[\/ ]+([\w\.]+)/i],[v,[c,C+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[c,C+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[c,C]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[c,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[c,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[c,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[c,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+E],v],[/\bfocus\/([\w\.]+)/i],[v,[c,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[c,C+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[c,C+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[c,"MIUI"+z]],[/fxios\/([\w\.-]+)/i],[v,[c,O]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[c,"360"]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+z],v],[/samsungbrowser\/([\w\.]+)/i],[v,[c,L+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[c,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[c],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,R],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[c,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,P+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[c,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[v,$,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[c,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[c,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[c,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,H]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[f,L],[d,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[f,L],[d,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[f,x],[d,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,x],[d,m]],[/(macintosh);/i],[l,[f,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[f,q],[d,b]],[/(?:honor)([-\w ]+)[;\)]/i],[l,[f,"Honor"],[d,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[f,T],[d,m]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[f,T],[d,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[f,A],[d,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[f,A],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[f,"OPPO"],[d,b]],[/\b(opd2\d{3}a?) bui/i],[l,[f,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[f,"Vivo"],[d,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[f,"Realme"],[d,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[f,j],[d,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[f,j],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[f,I],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[f,I],[d,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[f,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[f,"Nokia"],[d,b]],[/(pixel c)\b/i],[l,[f,V],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[f,V],[d,b]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,N],[d,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[f,N],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[f,"OnePlus"],[d,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[f,k],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[f,k],[d,b]],[/(playbook);[-\w\),; ]+(rim)/i],[l,f,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[f,S],[d,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[f,F],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[f,F],[d,b]],[/(nexus 9)/i],[l,[f,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[l,/_/g," "],[d,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[f,"TCL"],[d,m]],[/(itel) ((\w+))/i],[[f,H],l,[d,$,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[f,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[f,"Meizu"],[d,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[f,"Ulefone"],[d,b]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[l,[f,"Energizer"],[d,b]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[l,[f,"Cat"],[d,b]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[l,[f,"Smartfren"],[d,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[f,"Nothing"],[d,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,l,[d,b]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,l,[d,m]],[/(surface duo)/i],[l,[f,M],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[f,"Fairphone"],[d,b]],[/(u304aa)/i],[l,[f,"AT&T"],[d,b]],[/\bsie-(\w*)/i],[l,[f,"Siemens"],[d,b]],[/\b(rct\w+) b/i],[l,[f,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[l,[f,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[l,[f,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[f,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[l,[f,"NuVision"],[d,m]],[/\b(k88) b/i],[l,[f,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[l,[f,"ZTE"],[d,b]],[/\b(gen\d{3}) b.+49h/i],[l,[f,"Swiss"],[d,b]],[/\b(zur\d{3}) b/i],[l,[f,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[l,[f,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],l,[d,m]],[/\b(ns-?\w{0,9}) b/i],[l,[f,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[f,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],l,[d,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],l,[d,b]],[/\b(ph-1) /i],[l,[f,"Essential"],[d,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[f,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[l,[f,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[l,[f,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[l,[f,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[f,l,[d,b]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,M],[d,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,B],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,B],[d,b]],[/smart-tv.+(samsung)/i],[f,[d,g]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,L],[d,g]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,I],[d,g]],[/(apple) ?tv/i],[f,[l,x+" TV"],[d,g]],[/crkey/i],[[l,P+"cast"],[f,V],[d,g]],[/droid.+aft(\w+)( bui|\))/i],[l,[f,k],[d,g]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[f,q],[d,g]],[/(bravia[\w ]+)( bui|\))/i],[l,[f,N],[d,g]],[/(mitv-\w{5}) bui/i],[l,[f,A],[d,g]],[/Hbbtv.*(technisat) (.*);/i],[f,l,[d,g]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Q],[l,Q],[d,g]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,l,[d,h]],[/droid.+; (shield) bui/i],[l,[f,"Nvidia"],[d,h]],[/(playstation [345portablevi]+)/i],[l,[f,N],[d,h]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[f,M],[d,h]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[f,L],[d,_]],[/((pebble))app/i],[f,l,[d,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[f,x],[d,_]],[/droid.+; (glass) \d/i],[l,[f,V],[d,_]],[/droid.+; (wt63?0{2,3})\)/i],[l,[f,B],[d,_]],[/droid.+; (glass) \d/i],[l,[f,V],[d,_]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,l,[d,_]],[/; (quest( \d| pro)?)/i],[l,[f,R],[d,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[d,y]],[/(aeobc)\b/i],[l,[f,k],[d,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[d,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,b]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[c,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[c,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[v,$,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,$,X],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,U],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,v],[/\(bb(10);/i],[v,[c,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[c,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[c,P+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,D],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,v],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,v]]},J=function(e,t){if(p(e)===a&&(t=e,e=i),!(this instanceof J))return new J(e,t).getResult();var h=p(r)!==o&&r.navigator?r.navigator:i,g=e||(h&&h.userAgent?h.userAgent:""),_=h&&h.userAgentData?h.userAgentData:i,y=t?function(e,t){var r={};for(var i in e)t[i]&&t[i].length%2==0?r[i]=t[i].concat(e[i]):r[i]=e[i];return r}(Y,t):Y,k=h&&h.userAgent==g;return this.getBrowser=function(){var e,t={};return t[c]=i,t[v]=i,Z.call(t,g,y.browser),t[u]=p(e=t[v])===s?e.replace(/[^\d\.]/g,"").split(".")[0]:i,k&&h&&h.brave&&p(h.brave.isBrave)==n&&(t[c]="Brave"),t},this.getCPU=function(){var e={};return e[w]=i,Z.call(e,g,y.cpu),e},this.getDevice=function(){var e={};return e[f]=i,e[l]=i,e[d]=i,Z.call(e,g,y.device),k&&!e[d]&&_&&_.mobile&&(e[d]=b),k&&"Macintosh"==e[l]&&h&&p(h.standalone)!==o&&h.maxTouchPoints&&h.maxTouchPoints>2&&(e[l]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[c]=i,e[v]=i,Z.call(e,g,y.engine),e},this.getOS=function(){var e={};return e[c]=i,e[v]=i,Z.call(e,g,y.os),k&&!e[c]&&_&&_.platform&&"Unknown"!=_.platform&&(e[c]=_.platform.replace(/chrome os/i,D).replace(/macos/i,U)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return g},this.setUA=function(e){return g=p(e)===s&&e.length>500?Q(e,500):e,this},this.setUA(g),this};J.VERSION="1.0.40",J.BROWSER=G([c,v,u]),J.CPU=G([w]),J.DEVICE=G([l,f,d,h,b,g,m,_,y]),J.ENGINE=J.OS=G([c,v]),e.exports&&(t=e.exports=J),t.UAParser=J;var K=p(r)!==o&&(r.jQuery||r.Zepto);if(K&&!K.ua){var ee=new J;K.ua=ee.getResult(),K.ua.get=function(){return ee.getUA()},K.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var r in t)K.ua[r]=t[r]}}}("object"===("undefined"==typeof window?"undefined":p(window))?window:J)}(K,K.exports);var ee=K.exports,te=null,re=function(){return te||(te=new ee.UAParser)},ie=function(){var e,t=re().getDevice().type;if(!t)return"pc";return null!==(e={mobile:"phone",tablet:"pad",smarttv:"tv",embedded:"embedded",wearable:"ware",console:"console"}[t])&&void 0!==e?e:"pc"},ne=function(){var e,t,r=re(),i=r.getDevice(),n=r.getOS(),o=n.name?"".concat(n.name).concat(n.version?" "+n.version:""):"",a=navigator.userAgent;!o&&/OpenHarmony/.test(a)&&(o=null!==(e=null===(t=a.match(/(OpenHarmony ?[\d.]*)/))||void 0===t?void 0:t[1])&&void 0!==e?e:"");return{brand:i.vendor||"",model:i.model||"",system:o}},oe=function(e){var t,r;return{app_id:null!==(t=null==e?void 0:e.appId)&&void 0!==t?t:100,platform:(null!==(r=null==e?void 0:e.platform)&&void 0!==r?r:/AppleWebKit.*Mobile.*/i.test(navigator.userAgent))?6:5,cbuvid:L("buvid3")||"",cmid:parseInt(L("DedeUserID")||L("gray_uid")||"0"),fts:L("b_nut")||"",screen_resolution:"".concat(window.screen.width,"*").concat(window.screen.height),timezone:(new Date).getTimezoneOffset().toString(),bilifp:L("buvid_fp")||"",device_type:ie()}},ae=function(e){var t,r,i,n;return{network_info:null!==(t=null!==(r=null==e?void 0:e.networkInfo)&&void 0!==r?r:null===(i=navigator.connection)||void 0===i?void 0:i.effectiveType)&&void 0!==t?t:"4g",url:window.location.href,refer_url:document.referrer,logver:T,abtest:JSON.stringify(null!==(n=window.abtest)&&void 0!==n?n:{}),ptype:Y(),window_size:"".concat(window.innerWidth,"*").concat(window.innerHeight),bsource:X().bsource,bsource_origin:j("bsource")||"",share_source_origin:j("share_source")||"",share_session_id:j("unique_k")||"",session_id:$()}},se=function(){var e,t,r,i,n,o=null===(e=window.performance)||void 0===e||null===(t=e.getEntriesByType)||void 0===t||null===(t=t.call(e,"navigation"))||void 0===t?void 0:t[0];if(o){var a;return null!==(a={navigate:0,reload:1,back_forward:2,prerender:3}[o.type])&&void 0!==a?a:0}return null!==(r=window.performance)&&void 0!==r&&r.navigation&&null!==(i=null===(n=window.performance)||void 0===n||null===(n=n.navigation)||void 0===n?void 0:n.type)&&void 0!==i?i:0},ue={enabled:!0,value:{batchSize:32,batchTime:1e3}},le={enabled:!0,value:{maxCount:5,retryInterval:3e3,maxInterval:6e4}},ce="undefined"!=typeof window,de=function(){return-1!==navigator.userAgent.indexOf("bilibili_pc/")||-1!==navigator.userAgent.indexOf("bilibili/")||-1!==navigator.userAgent.indexOf("bili_browser/")},fe=L("buvid3")||"",pe=(fe?function(e){for(var t=5381,r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r);return t>>>0}(fe+"buvid4")%100:0)<1;var ve,we=function(e){var t=e.url,r=e.method,i=e.body,n=e.headers,o=e.credentials,a=new XMLHttpRequest;return new Promise((function(e,s){if(a.open(r.toUpperCase(),t),o&&"omit"===o||(a.withCredentials=!0),a.responseType="text",n)for(var u in n)a.setRequestHeader(u,n[u]);a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var t=a.status;if(t>=200&&t<300){var r=null==a?void 0:a.responseText;e(r||"")}else s({code:t})}},a.onerror=function(e){return s(e)},a.ontimeout=function(){return s("timeout")},a.send(i)}))},he=function(){var e=r(c().mark((function e(t){var r,i,n,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.method,n=t.body,o=t.headers,a=t.credentials,s=t.keepalive,e.next=3,fetch(r,{method:i,headers:o,body:n,credentials:null!=a?a:"include",priority:"high",keepalive:null==s||s});case 3:if(!((u=e.sent).status<200&&u.status>=300)){e.next=6;break}throw new Error("".concat(u.status," ").concat(u.statusText));case 6:return e.abrupt("return",u.text());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=r(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="function"==typeof window.fetch?he:we,e.abrupt("return",r(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=1/0;ce&&((me=null!==(ve=Q("maxErrorCount"))&&void 0!==ve?ve:0)||(me=30+Math.floor(10*Math.random()),Z("maxErrorCount",me)));var ge=ce&&"function"==typeof window.fetch,_e=ce&&ge&&window.Request&&"keepalive"in Request.prototype,ye=ce&&"function"==typeof navigator.sendBeacon,ke=function(){var e=r(c().mark((function e(t,r){var i,n,o,a,s,u,d,f,p,v,w,h,b,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null!==(i=Q("errReqCount"))&&void 0!==i?i:0)>=me)){e.next=3;break}return e.abrupt("return");case 3:return o=null!==(n=null==r?void 0:r.url)&&void 0!==n?n:"//data.bilibili.com/v2/log/web",o=C(o,{content_type:"pbrequest",logid:r.logId,disable_compression:"true"}),a={url:o,method:"post",body:t,headers:{"Content-Type":"text/plain"}},s=t.length>=65536,u=s?function(){return ge?he(l(l({},a),{},{keepalive:!1})):we(a)}:_e?function(){return he(a)}:ye?function(){if(!navigator.sendBeacon(o,new Blob([t],{type:"text/plain"})))return ge?he(l(l({},a),{},{keepalive:!1})):we(a)}:function(){return we(a)},e.prev=8,e.next=11,u();case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(8),xe(),!(d=D(le,null==r?void 0:r.retry)).enabled){e.next=32;break}f=d.value,p=f.retryInterval,v=f.maxInterval,w=f.maxCount,h=1,b=c().mark((function e(){var t,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Math.random()*p,i=Math.min(1e3*Math.pow(p/1e3,h),v)+r,e.next=4,new Promise((function(e){return setTimeout(e,i)}));case 4:if(!((null!==(t=Q("errReqCount"))&&void 0!==t?t:0)>=me)){e.next=7;break}return e.abrupt("return",{v:void 0});case 7:return e.prev=7,e.next=10,u();case 10:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 14:e.prev=14,e.t1=e.catch(7),xe(),h+=1;case 18:case"end":return e.stop()}}),e,null,[[7,14]])}));case 22:if(!(h<=w)){e.next=29;break}return e.delegateYield(b(),"t1",24);case 24:if(!(m=e.t1)){e.next=27;break}return e.abrupt("return",m.v);case 27:e.next=22;break;case 29:console.error("[reporter-pb]: max retries exceeded",e.t0,a.body),e.next=33;break;case 32:console.error("[reporter-pb]: request error",e.t0,a.body);case 33:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,r){return e.apply(this,arguments)}}();function xe(){var e,t=(null!==(e=Q("errReqCount"))&&void 0!==e?e:0)+1;if(Z("errReqCount",t),t===me){var r=/^uat-/.test(location.hostname)?location.hostname.slice(0,4):"";be({url:"https://".concat(r,"api.bilibili.com/x/web-frontend/data/report"),method:"post",body:JSON.stringify({level:"ERROR",event:"reporter-request-blocked",extra:{spm_prefix:N("spm_prefix"),url:window.location.href,buvid3:L("buvid3"),mid:L("DedeUserID")||L("gray_uid")||"0",ua:navigator.userAgent}}),headers:{"Content-Type":"application/json"}}).catch((function(e){}))}}var Fe="https://s1.hdslb.com/bfs/seed/jinkela/short/cols/iframe.html",Se="COLS_RES",Ee=function(){var e=r(c().mark((function e(t){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==document.readyState){e.next=3;break}return e.next=3,new Promise((function(e){var t=function(){e(),document.removeEventListener("DOMContentLoaded",t)};document.addEventListener("DOMContentLoaded",t)}));case 3:if((r=document.querySelector('iframe[src="'.concat(t,'"]')))||((r=document.createElement("iframe")).src=t,r.style.display="none",document.body.appendChild(r)),i=(Number(r.dataset.count)||0)+1,r.dataset.count=i.toString(),!r.dataset.loaded){e.next=11;break}return e.abrupt("return",{iframe:r,instanceId:i});case 11:return e.abrupt("return",new Promise((function(e){var t=function(){r.dataset.loaded="true",r.removeEventListener("load",t),e({iframe:r,instanceId:i})};r.addEventListener("load",t)})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=r(c().mark((function e(t,i){var n,o,a,s,u,l,d,f,p,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&-1===(null===(n=t.indexOf)||void 0===n?void 0:n.call(t,":"))){e.next=2;break}throw new Error('namespace must be a string without ":"');case 2:if(o=(null==i?void 0:i.timeOut)||1e3,!navigator.vendor.match(/apple/i)){e.next=6;break}return e.abrupt("return",{getItem:function(e){return r(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",localStorage.getItem("".concat(t,":").concat(e)));case 1:case"end":return r.stop()}}),r)})))()},setItem:function(e,i){return r(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",localStorage.setItem("".concat(t,":").concat(e),i));case 1:case"end":return r.stop()}}),r)})))()},removeItem:function(e){return r(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",localStorage.removeItem("".concat(t,":").concat(e)));case 1:case"end":return r.stop()}}),r)})))()},keys:function(){return r(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(localStorage).filter((function(e){return 0===e.indexOf("".concat(t,":"))})).map((function(e){return e.replace("".concat(t,":"),"")})));case 1:case"end":return e.stop()}}),e)})))()},clear:function(){return r(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="".concat(t,":"),Object.keys(localStorage).filter((function(e){return 0===e.indexOf(r)})).forEach((function(e){localStorage.removeItem(e)}));case 3:case"end":return e.stop()}}),e)})))()},listen:function(){return function(){}},destroy:function(){}});case 6:return a=function(e){return new Promise((function(t,r){setTimeout((function(){return r(new Error("COLS: response timeout"))}),o);var i=function(r){r.data.type===Se&&r.data.id===e&&(t(r.data.value),window.removeEventListener("message",i))};window.addEventListener("message",i)}))},s=new URL((null==i?void 0:i.iframeSrc)||Fe),u=s.origin,e.next=11,Ee((null==i?void 0:i.iframeSrc)||Fe);case 11:return l=e.sent,d=l.iframe,f=l.instanceId,p=Math.round(65535*Math.random()),v=function(){return p+=1,p%=65535,"".concat(f,"-").concat(p)},e.abrupt("return",{getItem:function(e){return r(c().mark((function r(){var i,n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e="".concat(t,":").concat(e),n=v(),null===(i=d.contentWindow)||void 0===i||i.postMessage({type:"COLS_GET",key:e,id:n},u),r.abrupt("return",a(n));case 4:case"end":return r.stop()}}),r)})))()},setItem:function(e,i){return r(c().mark((function r(){var n,o;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e="".concat(t,":").concat(e),o=v(),null===(n=d.contentWindow)||void 0===n||n.postMessage({type:"COLS_SET",key:e,value:i,id:o},u),r.abrupt("return",a(o));case 4:case"end":return r.stop()}}),r)})))()},removeItem:function(e){return r(c().mark((function r(){var i,n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e="".concat(t,":").concat(e),n=v(),null===(i=d.contentWindow)||void 0===i||i.postMessage({type:"COLS_RM",key:e,id:n},u),r.abrupt("return",a(n));case 4:case"end":return r.stop()}}),r)})))()},keys:function(){return r(c().mark((function e(){var r,i,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,n=v(),null===(r=d.contentWindow)||void 0===r||r.postMessage({type:"COLS_KEYS",key:i,id:n},u),e.abrupt("return",a(n));case 4:case"end":return e.stop()}}),e)})))()},clear:function(){return r(c().mark((function e(){var r,i,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,n=v(),null===(r=d.contentWindow)||void 0===r||r.postMessage({type:"COLS_CLR",key:i,id:n},u),e.abrupt("return",a(n));case 4:case"end":return e.stop()}}),e)})))()},listen:function(e,r){var i;e="".concat(t,":").concat(e);var n=v();null===(i=d.contentWindow)||void 0===i||i.postMessage({type:"COLS_LIS",key:e,id:n},u);var o=function(e){e.data.type===Se&&e.data.id===n&&r(e.data.value)};return window.addEventListener("message",o),function(){var t;window.removeEventListener("message",o),null===(t=d.contentWindow)||void 0===t||t.postMessage({type:"COLS_LIS_UN",key:e,id:n},u)}},destroy:function(){var e;(d.dataset.count="".concat((Number(d.dataset.count)||0)-1),Number(d.dataset.count)<=0)&&(null===(e=d.parentNode)||void 0===e||e.removeChild(d))}});case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Oe=null,Ve=function(e){return/^\w{8,}-\w{4,}-\w{4,}-\w{4,}/.test(e)},Te=function(e){return de()?/^\w{32,}/.test(e):/^\w{8,}-\w{4,}-\w{4,}-\w{4,}-\w{17,}infoc$/.test(e)},Ie=function(){var e=L("buvid3")||"",t=L("buvid4")||"";return Te(e)&&Ve(t)},Me=function(){var e=L("buvid3")||"",t=L("buvid4")||"";return Te(e)&&Ve(t)&&"G"===t.charAt(35)},je=function(){var e=A,t=("00000"+(Date.now()%1e5).toString()).slice(-5);return"".concat(e(8),"-").concat(e(4),"-").concat(e(4),"-").concat(e(4),"-").concat(e(12)).concat(t,"infoc")},Ce=function(){var e=r(c().mark((function e(){var t,r,i,n,o,a,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],Oe||(Oe=Pe("buvid-space",{iframeSrc:null!==(r=null===(i=window)||void 0===i||null===(i=i.__PB_CONFIG__)||void 0===i?void 0:i.crossStorageUrl)&&void 0!==r?r:void 0})),!t){e.next=17;break}return e.next=5,Oe;case 5:if(n=e.sent,o=L("buvid3")||"",a=L("buvid4")||"",Ie()){e.next=11;break}return e.next=11,Promise.all([n.removeItem("cross_buvid3"),n.removeItem("cross_buvid4"),n.removeItem("cross_buvid_lrt")]);case 11:if(!Te(o)){e.next=14;break}return e.next=14,n.setItem("cross_buvid3",o);case 14:if(!Ve(a)){e.next=17;break}return e.next=17,n.setItem("cross_buvid4",a);case 17:return e.abrupt("return",Oe);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=r(c().mark((function e(t){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce();case 3:return r=e.sent,i="cross_"+t,e.next=7,r.getItem(i);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=r(c().mark((function e(t,r){var i,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce();case 3:return i=e.sent,n="cross_"+t,e.next=7,i.setItem(n,r);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),Ne=function(){var e=r(c().mark((function e(t){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce();case 3:return r=e.sent,i="cross_"+t,e.next=7,r.removeItem(i);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=r(c().mark((function e(t,r,i){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=L(t),!Ve(n||"")){e.next=5;break}return e.next=4,qe(t,n||"");case 4:return e.abrupt("return");case 5:if(!r){e.next=9;break}return q(t,r,i||94608e3,"current-domain"),e.next=9,qe(t,r);case 9:case"end":return e.stop()}}),e)})));return function(t,r,i){return e.apply(this,arguments)}}(),Be=function(){var e=r(c().mark((function e(){var t,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le("buvid3");case 2:return t=e.sent,Te(t||"")&&!L("buvid3")&&q("buvid3",t||"",94608e3,"same-domain"),e.next=6,Le("buvid4");case 6:return r=e.sent,e.next=9,Re();case 9:i=e.sent,!Ve(r||"")||L("buvid4")||i||q("buvid4",r||"",2592e3,"same-domain");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=r(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le("buvid_lrt");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",Date.now()-parseInt(t)>2592e6);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e){return"G"===e.charAt(35)},Ue=function(){var e=r(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce){e.next=2;break}return e.abrupt("return");case 2:if(window.location===window.parent.location&&window.self===window.top&&!window.frameElement){e.next=4;break}return e.abrupt("return");case 4:if(!de()){e.next=6;break}return e.abrupt("return");case 6:if(t=function(){var e=r(c().mark((function e(){var t,r,i,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==(t=null===(r=window)||void 0===r||null===(r=r.__PB_CONFIG__)||void 0===r?void 0:r.disableCrossStorage)&&void 0!==t&&t||"undefined"!=typeof wx&&wx&&wx.getSystemInfo||"undefined"!=typeof window&&"string"==typeof window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment||/bcut_windows|bcut_mac/.test(navigator.userAgent)||"undefined"!=typeof window&&/member\.bilibili\.com$/.test(location.hostname)&&/^\/editor\//.test(location.pathname))){e.next=5;break}return e.next=4,ze();case 4:return e.abrupt("return");case 5:return i="",e.prev=6,e.next=9,Ce();case 9:return n=e.sent,e.next=12,n.getItem("cross_buvid4");case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0="";case 15:i=e.t0,e.next=23;break;case 18:return e.prev=18,e.t1=e.catch(6),e.next=22,ze();case 22:return e.abrupt("return");case 23:if(o=L("buvid4")||"",!(De(o)||De(i)||pe)){e.next=29;break}return e.next=27,Ge();case 27:e.next=31;break;case 29:return e.next=31,ze();case 31:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(){return e.apply(this,arguments)}}(),!Te(L("buvid3")||"")){e.next=11;break}t(),e.next=13;break;case 11:return e.next=13,t();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=r(c().mark((function e(){var t,r,i,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ie()){e.next=2;break}return e.abrupt("return");case 2:return i=null,e.prev=3,e.t0=JSON,e.next=7,be({url:"https://api.bilibili.com/x/frontend/finger/spi",method:"get"});case 7:e.t1=e.sent,i=e.t0.parse.call(e.t0,e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(3),console.error("[reporter-pb]: init buvid error ",e.t2);case 14:if(!Ie()){e.next=16;break}return e.abrupt("return");case 16:n=Ve((null===(t=i)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.b_3)||"")?i.data.b_3:je(),Te(L("buvid3")||"")||(q("buvid3",n,94608e3,"same-domain"),q("b_nut",Math.floor(Date.now()/1e3).toString(),94608e3,"same-domain")),o=(null===(r=i)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.b_4)||"",!Ve(L("buvid4")||"")&&Ve(o)&&q("buvid4",o,94608e3,"same-domain");case 20:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=r(c().mark((function e(){var t,r,i,n,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(!0);case 2:return i=e.sent,e.next=5,Be();case 5:if(!Me()){e.next=7;break}return e.abrupt("return");case 7:return n=null,e.prev=8,e.t0=JSON,e.next=12,be({url:"https://api.bilibili.com/x/frontend/finger/spi_v2",method:"get"});case 12:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(8),console.error("[reporter-pb]: init buvid error ",e.t2);case 19:if(!Me()){e.next=21;break}return e.abrupt("return");case 21:if(o=Ve((null===(t=n)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.b_3)||"")?n.data.b_3:je(),Te(L("buvid3")||"")||(q("buvid3",o,94608e3,"same-domain"),q("b_nut",Math.floor(Date.now()/1e3).toString(),94608e3,"same-domain")),a=(null===(r=n)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.b_4)||"",!Ve(a)||L("buvid3")!==o){e.next=31;break}if(q("buvid4",a,2592e3,"same-domain"),!De(a)){e.next=29;break}return e.next=29,Promise.all([Ae("buvid3"),Ae("buvid4",a,2592e3),qe("buvid_lrt",Math.floor(Date.now()).toString())]);case 29:e.next=34;break;case 31:if(Ve(n.data.b_3||"")){e.next=34;break}return e.next=34,Promise.all([Ne("buvid3"),Ne("buvid4"),Ne("buvid_lrt")]);case 34:i&&i.destroy();case 35:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}(),We=4294967296,He=1/We,Qe="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8"),Ze=function(){return o((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array(16);i(this,e),this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}),[{key:"readFields",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,e(n,t,this),this.pos===o&&this.skip(i)}return t}},{key:"readMessage",value:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}},{key:"readFixed32",value:function(){var e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}},{key:"readSFixed32",value:function(){var e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}},{key:"readFixed64",value:function(){var e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*We;return this.pos+=8,e}},{key:"readSFixed64",value:function(){var e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*We;return this.pos+=8,e}},{key:"readFloat",value:function(){var e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}},{key:"readDouble",value:function(){var e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}},{key:"readVarint",value:function(e){var t,r,i=this.buf;return t=127&(r=i[this.pos++]),r<128?t:(t|=(127&(r=i[this.pos++]))<<7,r<128?t:(t|=(127&(r=i[this.pos++]))<<14,r<128?t:(t|=(127&(r=i[this.pos++]))<<21,r<128?t:function(e,t,r){var i,n,o=r.buf;if(n=o[r.pos++],i=(112&n)>>4,n<128)return $e(e,i,t);if(n=o[r.pos++],i|=(127&n)<<3,n<128)return $e(e,i,t);if(n=o[r.pos++],i|=(127&n)<<10,n<128)return $e(e,i,t);if(n=o[r.pos++],i|=(127&n)<<17,n<128)return $e(e,i,t);if(n=o[r.pos++],i|=(127&n)<<24,n<128)return $e(e,i,t);if(n=o[r.pos++],i|=(1&n)<<31,n<128)return $e(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=i[this.pos]))<<28,e,this))))}},{key:"readVarint64",value:function(){return this.readVarint(!0)}},{key:"readSVarint",value:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2}},{key:"readBoolean",value:function(){return Boolean(this.readVarint())}},{key:"readString",value:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Qe?Qe.decode(this.buf.subarray(t,e)):function(e,t,r){var i="",n=t;for(;n<r;){var o=e[n],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n+s>r)break;var u=void 0,l=void 0,c=void 0;1===s?o<128&&(a=o):2===s?128==(192&(u=e[n+1]))&&(a=(31&o)<<6|63&u)<=127&&(a=null):3===s?(u=e[n+1],l=e[n+2],128==(192&u)&&128==(192&l)&&((a=(15&o)<<12|(63&u)<<6|63&l)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=e[n+1],l=e[n+2],c=e[n+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&((a=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,i+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),i+=String.fromCharCode(a),n+=s}return i}(this.buf,t,e)}},{key:"readBytes",value:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}},{key:"readPackedVarint",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=this.readPackedEnd();this.pos<r;)e.push(this.readVarint(t));return e}},{key:"readPackedSVarint",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readSVarint());return e}},{key:"readPackedBoolean",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readBoolean());return e}},{key:"readPackedFloat",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readFloat());return e}},{key:"readPackedDouble",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readDouble());return e}},{key:"readPackedFixed32",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readFixed32());return e}},{key:"readPackedSFixed32",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readSFixed32());return e}},{key:"readPackedFixed64",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readFixed64());return e}},{key:"readPackedSFixed64",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.readPackedEnd();this.pos<t;)e.push(this.readSFixed64());return e}},{key:"readPackedEnd",value:function(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}},{key:"skip",value:function(e){var t=7&e;if(0===t)for(;this.buf[this.pos++]>127;);else if(2===t)this.pos=this.readVarint()+this.pos;else if(5===t)this.pos+=4;else{if(1!==t)throw new Error("Unimplemented type: ".concat(t));this.pos+=8}}},{key:"writeTag",value:function(e,t){this.writeVarint(e<<3|t)}},{key:"realloc",value:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}},{key:"finish",value:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}},{key:"writeFixed32",value:function(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}},{key:"writeSFixed32",value:function(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}},{key:"writeFixed64",value:function(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*He),!0),this.pos+=8}},{key:"writeSFixed64",value:function(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*He),!0),this.pos+=8}},{key:"writeVarint",value:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,i;e>=0?(r=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,i=i+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}(r,0,t),function(e,t){var r=(7&e)<<4;if(t.buf[t.pos++]|=r|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}},{key:"writeSVarint",value:function(e){this.writeVarint(e<0?2*-e-1:2*e)}},{key:"writeBoolean",value:function(e){this.writeVarint(+e)}},{key:"writeString",value:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var i,n,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):n=i;continue}if(i<56320){e[r++]=239,e[r++]=191,e[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(e[r++]=239,e[r++]=191,e[r++]=189,n=null);i<128?e[r++]=i:(i<2048?e[r++]=i>>6|192:(i<65536?e[r++]=i>>12|224:(e[r++]=i>>18|240,e[r++]=i>>12&63|128),e[r++]=i>>6&63|128),e[r++]=63&i|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&Xe(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}},{key:"writeFloat",value:function(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}},{key:"writeDouble",value:function(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}},{key:"writeBytes",value:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]}},{key:"writeRawMessage",value:function(e,t){this.pos++;var r=this.pos;e(t,this);var i=this.pos-r;i>=128&&Xe(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}},{key:"writeMessage",value:function(e,t,r){this.writeTag(e,2),this.writeRawMessage(t,r)}},{key:"writePackedVarint",value:function(e,t){t.length&&this.writeMessage(e,Ye,t)}},{key:"writePackedSVarint",value:function(e,t){t.length&&this.writeMessage(e,Je,t)}},{key:"writePackedBoolean",value:function(e,t){t.length&&this.writeMessage(e,tt,t)}},{key:"writePackedFloat",value:function(e,t){t.length&&this.writeMessage(e,Ke,t)}},{key:"writePackedDouble",value:function(e,t){t.length&&this.writeMessage(e,et,t)}},{key:"writePackedFixed32",value:function(e,t){t.length&&this.writeMessage(e,rt,t)}},{key:"writePackedSFixed32",value:function(e,t){t.length&&this.writeMessage(e,it,t)}},{key:"writePackedFixed64",value:function(e,t){t.length&&this.writeMessage(e,nt,t)}},{key:"writePackedSFixed64",value:function(e,t){t.length&&this.writeMessage(e,ot,t)}},{key:"writeBytesField",value:function(e,t){this.writeTag(e,2),this.writeBytes(t)}},{key:"writeFixed32Field",value:function(e,t){this.writeTag(e,5),this.writeFixed32(t)}},{key:"writeSFixed32Field",value:function(e,t){this.writeTag(e,5),this.writeSFixed32(t)}},{key:"writeFixed64Field",value:function(e,t){this.writeTag(e,1),this.writeFixed64(t)}},{key:"writeSFixed64Field",value:function(e,t){this.writeTag(e,1),this.writeSFixed64(t)}},{key:"writeVarintField",value:function(e,t){this.writeTag(e,0),this.writeVarint(t)}},{key:"writeSVarintField",value:function(e,t){this.writeTag(e,0),this.writeSVarint(t)}},{key:"writeStringField",value:function(e,t){this.writeTag(e,2),this.writeString(t)}},{key:"writeFloatField",value:function(e,t){this.writeTag(e,5),this.writeFloat(t)}},{key:"writeDoubleField",value:function(e,t){this.writeTag(e,1),this.writeDouble(t)}},{key:"writeBooleanField",value:function(e,t){this.writeVarintField(e,+t)}}])}();function $e(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Xe(e,t,r){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=e;n--)r.buf[n+i]=r.buf[n]}function Ye(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function Je(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function Ke(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function et(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function tt(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function rt(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function it(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function nt(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function ot(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}var at=function(){var e=window._GreyResult||window._BiliGreyResult,t={};e&&Object.keys(e).forEach((function(r){"grayVersion"===r?t._BiliGreyResult_versionId=e[r]:t["_BiliGreyResult_".concat(r)]=e[r]}));return t};function st(e,t){if(e.log_id&&t.writeStringField(1,e.log_id),e.event_id&&t.writeStringField(2,e.event_id),null!=e.body&&t.writeBytesField(3,e.body),e.meta)for(var r=0,i=Object.keys(e.meta);r<i.length;r++){var n=i[r];t.writeMessage(4,ut,{key:n,value:e.meta[n]})}}function ut(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function lt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function ct(e,t){e.app_id&&t.writeVarintField(1,e.app_id),e.platform&&t.writeVarintField(2,e.platform),e.cbuvid&&t.writeStringField(3,e.cbuvid),e.cmid&&t.writeVarintField(4,e.cmid),e.fts&&t.writeStringField(5,e.fts),e.screen_resolution&&t.writeStringField(6,e.screen_resolution),e.timezone&&t.writeStringField(7,e.timezone),e.bilifp&&t.writeStringField(8,e.bilifp),e.device_type&&t.writeStringField(9,e.device_type)}function dt(e,t){e.network_info&&t.writeStringField(1,e.network_info),e.url&&t.writeStringField(2,e.url),e.refer_url&&t.writeStringField(3,e.refer_url),e.logver&&t.writeStringField(4,e.logver),e.abtest&&t.writeStringField(5,e.abtest),e.ptype&&t.writeVarintField(6,e.ptype),e.window_size&&t.writeStringField(7,e.window_size),e.bsource&&t.writeStringField(8,e.bsource),e.bsource_origin&&t.writeStringField(9,e.bsource_origin),e.share_source_origin&&t.writeStringField(10,e.share_source_origin),e.share_session_id&&t.writeStringField(11,e.share_session_id),e.session_id&&t.writeStringField(12,e.session_id)}function ft(e,t){if(e.target_url&&t.writeStringField(1,e.target_url),e.button_type&&t.writeVarintField(2,e.button_type),e.target_event_id&&t.writeStringField(3,e.target_event_id),e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(4,pt,{key:n,value:e.extra[n]})}}function pt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function vt(e,t){if(e.event_id_from&&t.writeStringField(1,e.event_id_from),e.load_type&&t.writeVarintField(2,e.load_type),e.pv_start&&t.writeVarintField(3,e.pv_start),e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(4,wt,{key:n,value:e.extra[n]})}}function wt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function ht(e,t){if(e.event_id_from&&t.writeStringField(1,e.event_id_from),e.load_type&&t.writeVarintField(2,e.load_type),e.pv_start&&t.writeVarintField(3,e.pv_start),e.duration&&t.writeVarintField(4,e.duration),e.pv_end&&t.writeVarintField(5,e.pv_end),e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(6,bt,{key:n,value:e.extra[n]})}}function bt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function mt(e,t){if(e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(1,gt,{key:n,value:e.extra[n]})}}function gt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function _t(e,t){if(e.spm_id&&t.writeStringField(1,e.spm_id),e.play_from_spmid&&t.writeStringField(2,e.play_from_spmid),e.avid&&t.writeVarintField(3,e.avid),e.cid&&t.writeVarintField(4,e.cid),e.pname&&t.writeVarintField(5,e.pname),e.room_id&&t.writeVarintField(6,e.room_id),e.season_id&&t.writeVarintField(7,e.season_id),e.ep_id&&t.writeVarintField(8,e.ep_id),e.video_type&&t.writeVarintField(9,e.video_type),e.sub_type&&t.writeVarintField(10,e.sub_type),e.fid&&t.writeStringField(11,e.fid),e.fver&&t.writeStringField(12,e.fver),e.player_session_id&&t.writeStringField(13,e.player_session_id),e.progress&&t.writeStringField(14,e.progress),e.play_method&&t.writeVarintField(15,e.play_method),e.video_format&&t.writeVarintField(16,e.video_format),e.player_playback_state&&t.writeVarintField(17,e.player_playback_state),e.danmaku&&t.writeVarintField(18,e.danmaku),e.statue&&t.writeVarintField(19,e.statue),e.videoquality&&t.writeStringField(20,e.videoquality),e.audioquality&&t.writeStringField(21,e.audioquality),e.speed&&t.writeStringField(22,e.speed),e.is_autoplay&&t.writeVarintField(23,e.is_autoplay),e.duration&&t.writeVarintField(24,e.duration),e.realtime&&t.writeVarintField(25,e.realtime),e.videourl&&t.writeStringField(26,e.videourl),e.audiourl&&t.writeStringField(27,e.audiourl),e.player_extra)for(var r=0,i=Object.keys(e.player_extra);r<i.length;r++){var n=i[r];t.writeMessage(28,yt,{key:n,value:e.player_extra[n]})}}function yt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}var kt={pv:0,pv_unload:5,click:1,custom:3,player:4,exposure:2},xt=function(e,t){var r,i,n,o=t.reporter.options,a=t.reporter.sequencer.get(),s=a.sn,u=a.time,c={pv:function(){return{page_view_info:{event_id_from:j("spm_id_from")||j("from_spmid")||"",load_type:se(),pv_start:e.ts||0,extra:z(l(l({},null==o?void 0:o.extra),e.data))}}},pv_unload:function(){var t,r,i,n,a=e.ts,s=null!==(t=null!==(r=null===(i=e.data)||void 0===i?void 0:i.pvStart)&&void 0!==r?r:null===(n=performance)||void 0===n?void 0:n.timeOrigin)&&void 0!==t?t:a,u=a-s,c=U(l(l({},null==o?void 0:o.extra),e.data),["pvStart"]).remain;return{page_view_unload_info:{event_id_from:j("spm_id_from")||j("from_spmid")||"",load_type:se(),pv_start:s||0,pv_end:a||0,duration:u||0,extra:z(c)}}},click:function(){var t,r,i,n=["targetUrl","buttonType","targetEventId"];n=n.concat(n.map((function(e){return G(e)})));var a=U(l(l({},null==o?void 0:o.extra),e.data),n),s=a.selected,u=a.remain,c=W(s);return{click_info:{target_url:null!==(t=c.target_url)&&void 0!==t?t:"",button_type:null!==(r=c.button_type)&&void 0!==r?r:0,target_event_id:null!==(i=c.target_event_id)&&void 0!==i?i:"",extra:z(u)}}},exposure:function(){return{exposure_info:{extra:z(l(l({},null==o?void 0:o.extra),e.data))}}},player:function(){return e.data=W(e.data),e.data.player_extra&&(e.data.player_extra=z(e.data.player_extra)),{player_info:e.data}},custom:function(){return{extra:z(l(l(l(l({app_buvid:L("Buvid")||L("buvid")},at()),ne()),null==o?void 0:o.extra),e.data))}}},d=(null===(r=c[e.type])||void 0===r?void 0:r.call(c))||{},f=l(l({},null==o?void 0:o.base),null===(i=e.options)||void 0===i?void 0:i.base),p=l({info:oe(f),runtime_info:ae(f),event_id:e.spm,business:e.spm.split(".").slice(0,1).join("."),sn:s||0,sn_gen_time:u||0,ts:e.ts||0,upload_time:Date.now(),event_category:kt[e.type],extra:z(l(l(l({app_buvid:L("Buvid")||L("buvid")},at()),ne()),null==o?void 0:o.extra))},d),v=new Ze;!function(e,t){if(e.info&&t.writeMessage(1,ct,e.info),e.runtime_info&&t.writeMessage(2,dt,e.runtime_info),e.event_id&&t.writeStringField(3,e.event_id),e.business&&t.writeStringField(4,e.business),e.sn&&t.writeVarintField(5,e.sn),e.sn_gen_time&&t.writeVarintField(6,e.sn_gen_time),e.ts&&t.writeVarintField(7,e.ts),e.upload_time&&t.writeVarintField(8,e.upload_time),e.event_category&&t.writeVarintField(9,e.event_category),e.page_view_info&&t.writeMessage(10,vt,e.page_view_info),e.exposure_info&&t.writeMessage(11,mt,e.exposure_info),e.click_info&&t.writeMessage(12,ft,e.click_info),e.player_info&&t.writeMessage(13,_t,e.player_info),e.page_view_unload_info&&t.writeMessage(14,ht,e.page_view_unload_info),e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(15,lt,{key:n,value:e.extra[n]})}}(p,v);var w=v.finish();return(null==o?void 0:o.logLevel)>=1&&console.log("%c".concat(e.type," ").concat(e.spm,"\n"),"color: #30A46C",p),{log_id:(null==f?void 0:f.logId)||(null!==(n=t.reporter.options)&&void 0!==n&&n.DEBUG_TEST_CHANNEL?"025219":"021436"),event_id:e.spm,body:w,meta:{}}},Ft=function(e){var t={events:e},r=new Ze;return function(e,t){if(e.events){var r,i=a(e.events);try{for(i.s();!(r=i.n()).done;){var n=r.value;t.writeMessage(1,st,n)}}catch(e){i.e(e)}finally{i.f()}}}(t,r),r.finish()},St=null,Et=function(){var e;St||(St=null!==(e=window.__BMG_AF__)&&void 0!==e?e:null);return St},Pt=function(){var e=r(c().mark((function e(){var t,r,i,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null===(t=Et())||void 0===t?void 0:t.defDomain)||"i0.hdslb.com",i=/^uat-/.test(location.hostname)?location.hostname.slice(0,4):"",e.prev=2,e.next=5,be({method:"get",url:"//".concat(i).concat(r,"/bfs/polaris_web_conf/polaris/webcnf/event.cnf"),credentials:"omit"});case 5:(n=e.sent)&&(null===(o=window.localStorage)||void 0===o||o.setItem("__reporter-pb-sample-config",n),Z("sampleRateConfig",JSON.parse(n))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("[reporter-pb] fetch sample rate config failed");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),Ot=function(){var e,t=(null===(e=window)||void 0===e||null===(e=e.__PB_CONFIG__)||void 0===e?void 0:e.scSdkUrl)||"//s1.hdslb.com/bfs/seed/jinkela/short/minntaki-wasm-sdk/bili-sc-sdk.umd.js";if(!Q("LoadingScSdk"))if(Z("LoadingScSdk",!0),"complete"!==document.readyState||window.SecureCollectSDK){var r=function(){!window.SecureCollectSDK&&H(t).then((function(){Z("LoadingScSdk",!1)})),window.removeEventListener("load",r)};window.addEventListener("load",r)}else H(t).then((function(){Z("LoadingScSdk",!1)}))},Vt=function(e){if(!Tt.plugins[e])throw new Error("[reporter-pb]  ".concat(e," "))},Tt=function(){function e(t){var n,o,a,u,f=this;i(this,e),s(this,"version",T),s(this,"techEventReporter",null),s(this,"fpPromise",null),this.miss=Math.random()>(null!==(n=null===(o=this.options)||void 0===o?void 0:o.sampleRate)&&void 0!==n?n:1);var p="undefined"!=typeof window,v=p&&/\bDEBUG_TEST_CHANNEL=1\b/.test(window.location.search+window.location.hash),w=p&&!!L("DEBUG_TEST_CHANNEL");v&&q("DEBUG_TEST_CHANNEL","1",0,"same-domain"),this.options=l(l({},t),{},{DEBUG_TEST_CHANNEL:(null==t?void 0:t.DEBUG_TEST_CHANNEL)||v||w});var h=e.plugins.native,b=Q("initBuvidPromise");b||(b=Promise.all([Ue()].concat(d(h?[h.initBuvid()]:[]))).then((function(){f.buvidInit=!0})),Z("initBuvidPromise",b)),this.initBuvidPromise=b,this.initBuvidPromise.then((function(){var e,t;!function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&("undefined"!=typeof window&&window.location.hostname&&/\.bilibili\.co$/.test(window.location.hostname)||de()||"undefined"!=typeof window&&Ot())}(!(p&&null!==(e=null===(t=window)||void 0===t||null===(t=t.__PB_CONFIG__)||void 0===t?void 0:t.disableLoadSc)&&void 0!==e&&e))}));var m=X(),g={bsource:m.bsource,bsourceFrom:m.bsourceFrom,uaSource:function(){var e=navigator.userAgent.toLowerCase(),t=function(){return/chrome/i.test(e)||/\b(?:crmo|crios)\/([\w\.]+)/i.test(e)},r={qq:function(){return/QQ\/([\d\.]+)/i.test(e)},wechat:["MicroMessenger","wechat"],douban:["com.douban.frodo","doubanapp"],baidubox:"baiduboxapp",baiduinput:"baiduinput",zhihu:["com.zhihu.android","zhihuhybrid"],haokan:"haokan",iqiyi:["IqiyiApp","iqiyi IqiyiVersion"],NGA:"Nga",weibo:"Weibo",xigua:"NewsArticle",qqlive:"QQLiveBrowser",hupu:"shence.hupu.com",letv:"LetvMobileClient",zuiyou:"Zuiyou",cloudmusic:["CloudMusic","NeteaseMusic"],tieba:"tieba",sogousearch:"SogouSearch",ucbrowser:"UCBrowser",baidubrowser:"baidubrowser",sogoumobilebrowser:"SogouMobileBrowser",huaweibrowser:"HuaweiBrowser",vivobrowser:"VivoBrowser",miuibrowser:"MiuiBrowser",oppobrowser:"oppobrowser",quark:"Quark",mqqbrowser:"MQQBrowser",chromebrowser:t,"360browser":function(){return/\bqihu|(qi?ho?o?|360)browser/i.test(e)||t()&&!window.navigator.webkitPersistentStorage||Object.keys(window).some((function(e){return/qihoo/.test(e)}))}};for(var i in r){var n=r[i];if(Array.isArray(n)){for(var o=0;o<n.length;o++)if(e.indexOf(n[o].toLocaleLowerCase())>=0)return i}else if("string"==typeof n){if(e.indexOf(n.toLocaleLowerCase())>=0)return i}else if("function"==typeof n&&n())return i}return""}()};Object.keys(g).forEach((function(e){e&&(window[e]=g[e])})),this.sequencer=new M;var _,y=D(ue,null===(a=this.options)||void 0===a?void 0:a.batch);this.scheduler=new I(l(l({},y.enabled?y.value:{batchSize:1,batchTime:0}),{},{run:(_=r(c().mark((function e(t){var r,i,n,o,a,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=(null===(r=f.options)||void 0===r||null===(r=r.base)||void 0===r?void 0:r.logId)||(null!==(i=f.options)&&void 0!==i&&i.DEBUG_TEST_CHANNEL?"025219":"021436"),u=Ft(t),(null===(n=f.options)||void 0===n?void 0:n.logLevel)>=2&&(l=d(u).map((function(e){return"0".concat(e.toString(16)).slice(-2)})).join(" "),console.log("log_id: %c".concat(s,"\n%crequest size: %c").concat(u.length," bytes\n%crequest body:\n%c").concat(l),"color: #0090FF","","color: #0090FF","","background-color: #004744; color: #A8F5E5")),e.next=6,ke(u,{url:null===(o=f.options)||void 0===o||null===(o=o.base)||void 0===o?void 0:o.url,retry:null===(a=f.options)||void 0===a?void 0:a.retry,logId:s});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("scheduler_run",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return _.apply(this,arguments)})}));var k=null;this.spmPrefix&&!1!==(null==t?void 0:t.autoPv)&&p&&!Q("autoPvReported")&&(k=this.pv(void 0,void 0,{flush:!0}),e.plugins.native&&this.reportNative({event:"".concat(this.spmPrefix,".0.0.pv"),type:1}),Z("autoPvReported",!0)),function(){var e=Q("fetchSampleRateTimer");if(!e){try{var t,r=null===(t=window.localStorage)||void 0===t?void 0:t.getItem("__reporter-pb-sample-config");r&&Z("sampleRateConfig",JSON.parse(r))}catch(e){}Pt(),e=window.setInterval(Pt,12e4),Z("fetchSampleRateTimer",e)}}();var x=function(){var e;null!==k&&!1!==(null==t||null===(e=t.autoPv)||void 0===e?void 0:e.unload)&&(k(),k=null),f.flush()};window.addEventListener("beforeunload",x),window.addEventListener("pagehide",x);var F=function(){var t=r(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.plugins.fp)){t.next=4;break}return t.next=4,r.init(f);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();null!=t&&null!==(u=t.feature)&&void 0!==u&&u.fingerPrint&&!e.plugins.fp?this.fpPromise=H("".concat("https://s1.hdslb.com/bfs/seed/jinkela/short/reporter-pb","/fingerPrint.js")).then((function(){var t=window.ReporterPbFingerPrint;if(t)return e.use({fp:t}),F()})):this.fpPromise=F()}return o(e,[{key:"spmPrefix",get:function(){var e;return(null===(e=this.options)||void 0===e?void 0:e.spmPrefix)||N("spm_prefix")}},{key:"_handleSpmId",value:function(e){if(!e)return"";if("string"==typeof e)return e;var t=e.prefix||this.spmPrefix||"",r=e.e?".".concat(e.e):"";return t?"".concat(t,".").concat(e.c,".").concat(e.d).concat(r):""}},{key:"report",value:function(e,t,r,i){var n=this,o=this._handleSpmId(t);if(o){if(!this.miss&&function(e){var t=Q("sampleRateConfig");return!t||!t[e]||"number"!=typeof t[e]||Math.ceil(100*Math.random())<=t[e]}(o))if("tech"!==e){var a=Date.now(),s=function(){n.scheduler.add(xt({type:e,spm:o,data:r,ts:a,options:i},{reporter:n})),null!=i&&i.flush&&n.scheduler.flush()};if(this.buvidInit?s():this.initBuvidPromise.then(s),"pv"===e){var u=o.split(".").slice(0,4).concat("unload").join(".");return function(e){return n.report("pv_unload",u,l({pvStart:a},null!=e?e:{}),i)}}}else this._techReport(o,r,i)}else console.warn("[reporter-pb]: spmId not set",{type:e,spm:t,data:r,options:i})}},{key:"pv",value:function(e,t,r){if(!e){var i=this.spmPrefix;e=i?"".concat(i,".0.0"):""}return this.report("pv",e,null!=t?t:{},r)}},{key:"click",value:function(e,t,r){this.report("click",e,t,r)}},{key:"exposure",value:function(e,t,r){this.report("exposure",e,t,r)}},{key:"player",value:function(e,t,r){this.report("player",e,t,r)}},{key:"custom",value:function(e,t,r){this.report("custom",e,t,r)}},{key:"tech",value:function(e,t,r){this.report("tech",e,t,r)}},{key:"flush",value:function(){var e;this.scheduler.flush(),null===(e=this.techEventReporter)||void 0===e||e.flush()}},{key:"fpReport",value:(a=r(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fpPromise;case 2:Vt("fp"),e.plugins.fp.fpReport(this,r);case 4:case"end":return t.stop()}}),t,this)}))),function(e){return a.apply(this,arguments)})},{key:"_techReport",value:(n=r(c().mark((function t(r,i,n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.techEventReporter||(Vt("tech"),this.techEventReporter=new e.plugins.tech(this.options,this.initBuvidPromise,this.sequencer)),o=["performance","error","player","custom"].some((function(e){return e===(null==i?void 0:i.type)}))?i.type:"custom",null==i||delete i.type,this.techEventReporter.report(o,r,i,n);case 4:case"end":return t.stop()}}),t,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"reportNative",value:(t=r(c().mark((function t(){var r,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Vt("native"),t.abrupt("return",(r=e.plugins.native).reportNative.apply(r,i));case 2:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})},{key:"getActionID",value:function(){var t;return Vt("native"),(t=e.plugins.native).getActionID.apply(t,arguments)}}],[{key:"use",value:function(e){this.plugins=l(l({},this.plugins),e)}}]);var t,n,a}();function It(e,t){if(e.log_id&&t.writeStringField(1,e.log_id),e.event_id&&t.writeStringField(2,e.event_id),null!=e.body&&t.writeBytesField(3,e.body),e.meta)for(var r=0,i=Object.keys(e.meta);r<i.length;r++){var n=i[r];t.writeMessage(4,Mt,{key:n,value:e.meta[n]})}}function Mt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function jt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function Ct(e,t){e.app_id&&t.writeVarintField(1,e.app_id),e.platform&&t.writeVarintField(2,e.platform),e.cbuvid&&t.writeStringField(3,e.cbuvid),e.cmid&&t.writeVarintField(4,e.cmid),e.fts&&t.writeStringField(5,e.fts),e.screen_resolution&&t.writeStringField(6,e.screen_resolution),e.timezone&&t.writeStringField(7,e.timezone),e.bilifp&&t.writeStringField(8,e.bilifp),e.device_type&&t.writeStringField(9,e.device_type)}function Lt(e,t){e.network_info&&t.writeStringField(1,e.network_info),e.url&&t.writeStringField(2,e.url),e.refer_url&&t.writeStringField(3,e.refer_url),e.logver&&t.writeStringField(4,e.logver),e.abtest&&t.writeStringField(5,e.abtest),e.ptype&&t.writeVarintField(6,e.ptype),e.window_size&&t.writeStringField(7,e.window_size),e.bsource&&t.writeStringField(8,e.bsource),e.bsource_origin&&t.writeStringField(9,e.bsource_origin),e.share_source_origin&&t.writeStringField(10,e.share_source_origin),e.share_session_id&&t.writeStringField(11,e.share_session_id),e.session_id&&t.writeStringField(12,e.session_id)}function qt(e,t){if(e.navigation_start&&t.writeFloatField(1,e.navigation_start),e.unload_event_end&&t.writeFloatField(2,e.unload_event_end),e.redirect_start&&t.writeFloatField(3,e.redirect_start),e.redirect_end&&t.writeFloatField(4,e.redirect_end),e.fetch_start&&t.writeFloatField(5,e.fetch_start),e.domain_lookup_start&&t.writeFloatField(6,e.domain_lookup_start),e.domain_lookup_end&&t.writeFloatField(7,e.domain_lookup_end),e.connect_start&&t.writeFloatField(8,e.connect_start),e.connect_end&&t.writeFloatField(9,e.connect_end),e.secure_connection_start&&t.writeFloatField(10,e.secure_connection_start),e.request_start&&t.writeFloatField(11,e.request_start),e.response_start&&t.writeFloatField(12,e.response_start),e.response_end&&t.writeFloatField(13,e.response_end),e.dom_loading&&t.writeFloatField(14,e.dom_loading),e.dom_interactive&&t.writeFloatField(15,e.dom_interactive),e.dom_content_loaded_event_start&&t.writeFloatField(16,e.dom_content_loaded_event_start),e.dom_content_loaded_event_end&&t.writeFloatField(17,e.dom_content_loaded_event_end),e.dom_complete&&t.writeFloatField(18,e.dom_complete),e.load_event_start&&t.writeFloatField(19,e.load_event_start),e.load_event_end&&t.writeFloatField(20,e.load_event_end),e.cumulative_layout_shift&&t.writeFloatField(21,e.cumulative_layout_shift),e.first_paint&&t.writeFloatField(22,e.first_paint),e.first_contentful_paint&&t.writeFloatField(23,e.first_contentful_paint),e.first_meaningful_paint&&t.writeFloatField(24,e.first_meaningful_paint),e.largest_contentful_paint&&t.writeFloatField(25,e.largest_contentful_paint),e.time_to_first_byte&&t.writeFloatField(26,e.time_to_first_byte),e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(27,Nt,{key:n,value:e.extra[n]})}}function Nt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function At(e,t){if(e.error_type&&t.writeStringField(1,e.error_type),e.name&&t.writeStringField(2,e.name),e.message&&t.writeStringField(3,e.message),e.stack&&t.writeStringField(4,e.stack),e.instruments){var r,i=a(e.instruments);try{for(i.s();!(r=i.n()).done;){var n=r.value;t.writeMessage(5,Rt,n)}}catch(e){i.e(e)}finally{i.f()}}if(e.extra)for(var o=0,s=Object.keys(e.extra);o<s.length;o++){var u=s[o];t.writeMessage(6,Bt,{key:u,value:e.extra[u]})}}function Bt(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}function Rt(e,t){e.error_instrument_type&&t.writeStringField(1,e.error_instrument_type),e.message&&t.writeStringField(2,e.message),e.ts&&t.writeVarintField(3,e.ts),e.meta&&t.writeStringField(4,e.meta)}function Dt(e,t){if(e.spm_id&&t.writeStringField(1,e.spm_id),e.play_from_spmid&&t.writeStringField(2,e.play_from_spmid),e.avid&&t.writeVarintField(3,e.avid),e.cid&&t.writeVarintField(4,e.cid),e.pname&&t.writeVarintField(5,e.pname),e.room_id&&t.writeVarintField(6,e.room_id),e.season_id&&t.writeVarintField(7,e.season_id),e.ep_id&&t.writeVarintField(8,e.ep_id),e.video_type&&t.writeVarintField(9,e.video_type),e.sub_type&&t.writeVarintField(10,e.sub_type),e.fid&&t.writeStringField(11,e.fid),e.fver&&t.writeStringField(12,e.fver),e.player_session_id&&t.writeStringField(13,e.player_session_id),e.progress&&t.writeStringField(14,e.progress),e.play_method&&t.writeVarintField(15,e.play_method),e.video_format&&t.writeVarintField(16,e.video_format),e.player_playback_state&&t.writeVarintField(17,e.player_playback_state),e.danmaku&&t.writeVarintField(18,e.danmaku),e.statue&&t.writeVarintField(19,e.statue),e.videoquality&&t.writeStringField(20,e.videoquality),e.audioquality&&t.writeStringField(21,e.audioquality),e.speed&&t.writeStringField(22,e.speed),e.is_autoplay&&t.writeVarintField(23,e.is_autoplay),e.duration&&t.writeVarintField(24,e.duration),e.realtime&&t.writeVarintField(25,e.realtime),e.videourl&&t.writeStringField(26,e.videourl),e.audiourl&&t.writeStringField(27,e.audiourl),e.player_extra)for(var r=0,i=Object.keys(e.player_extra);r<i.length;r++){var n=i[r];t.writeMessage(28,Ut,{key:n,value:e.player_extra[n]})}}function Ut(e,t){e.key&&t.writeStringField(1,e.key),e.value&&t.writeStringField(2,e.value)}s(Tt,"version",T),s(Tt,"plugins",{});var zt={performance:0,error:1,player:3,custom:2},Gt=function(e){var t,r=null==e||null===(t=e.feature)||void 0===t?void 0:t.tech;return r&&"object"===p(r)&&r.logId?r.logId:null!=e&&e.DEBUG_TEST_CHANNEL?"025205":"021434"},Wt=function(e,t){var r,i,n=t.reporter.options,o=t.reporter.sequencer.get(),a=o.sn,s=o.time,u={performance:function(){var t=["type","navigation_start","unload_event_end","redirect_start","redirect_end","fetch_start","domain_lookup_start","domain_lookup_end","connect_start","connect_end","secure_connection_start","request_start","response_start","response_end","dom_loading","dom_interactive","dom_content_loaded_event_start","dom_content_loaded_event_end","dom_complete","load_event_start","load_event_end","cumulative_layout_shift","first_paint","first_contentful_paint","first_meaningful_paint","largest_contentful_paint","time_to_first_byte"];t=t.concat(t.map((function(e){return e.replace(/_[a-z]/g,(function(e){return e[1].toUpperCase()}))})));var r=U(l(l({},null==n?void 0:n.extra),e.data),t),i=r.selected,o=r.remain;return{performance_info:l(l({},W(i)),{},{extra:z(o)})}},error:function(){var t=U(l(l({},null==n?void 0:n.extra),e.data),["errorType","error_type","name","message","stack","instruments"]),r=t.selected,i=t.remain;return{error_event_info:{error_type:r.error_type,name:r.name,message:r.message||r.msg,stack:r.stack,instruments:(Array.isArray(r.instruments)?r.instruments:[]).map((function(e){return B(e)?W(e):e})),extra:z(i)}}},player:function(){return e.data=W(e.data),e.data.player_extra&&B(e.data.player_extra)&&(e.data.player_extra=z(e.data.player_extra)),{player_info:e.data}},custom:function(){return{extra:z(l(l(l(l({app_buvid:L("Buvid")||L("buvid")},at()),ne()),null==n?void 0:n.extra),e.data))}}},c=(null===(r=u[e.type])||void 0===r?void 0:r.call(u))||{},d=l(l({},null===(i=e.options)||void 0===i?void 0:i.base),null==n?void 0:n.base),f=l({info:oe(d),runtime_info:ae(d),event_id:e.spm,business:e.spm.split(".").slice(0,1).join("."),sn:a||0,sn_gen_time:s||0,ts:e.ts||0,upload_time:Date.now(),event_category:zt[e.type],extra:z(l(l(l({app_buvid:L("Buvid")||L("buvid")},at()),ne()),null==n?void 0:n.extra))},c),p=new Ze;!function(e,t){if(e.info&&t.writeMessage(1,Ct,e.info),e.runtime_info&&t.writeMessage(2,Lt,e.runtime_info),e.event_id&&t.writeStringField(3,e.event_id),e.business&&t.writeStringField(4,e.business),e.sn&&t.writeVarintField(5,e.sn),e.sn_gen_time&&t.writeVarintField(6,e.sn_gen_time),e.ts&&t.writeVarintField(7,e.ts),e.upload_time&&t.writeVarintField(8,e.upload_time),e.event_category&&t.writeVarintField(9,e.event_category),e.performance_info&&t.writeMessage(10,qt,e.performance_info),e.error_event_info&&t.writeMessage(11,At,e.error_event_info),e.player_info&&t.writeMessage(12,Dt,e.player_info),e.extra)for(var r=0,i=Object.keys(e.extra);r<i.length;r++){var n=i[r];t.writeMessage(13,jt,{key:n,value:e.extra[n]})}}(f,p);var v=p.finish();return(null==n?void 0:n.logLevel)>=1&&console.log("%c".concat(e.type," ").concat(e.spm,"\n"),"color: #30A46C",f),{log_id:Gt(t.reporter.options),event_id:e.spm,body:v,meta:{metaEventId:e.spm,metaEventCategory:e.type}}},Ht=function(e){var t={events:e},r=new Ze;return function(e,t){if(e.events){var r,i=a(e.events);try{for(i.s();!(r=i.n()).done;){var n=r.value;t.writeMessage(1,It,n)}}catch(e){i.e(e)}finally{i.f()}}}(t,r),r.finish()},Qt=function(){return o((function e(t,n,o){var a,s=this;i(this,e),this.options=t,this.initBuvidPromise=(n||Ue()).then((function(){s.buvidInit=!0})),this.sequencer=o||new M;var u,f=D(ue,null===(a=this.options)||void 0===a?void 0:a.batch);this.scheduler=new I(l(l({},f.enabled?f.value:{batchSize:1,batchTime:0}),{},{run:(u=r(c().mark((function e(r){var i,n,o,a,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Ht(r),a=Gt(s.options),(null===(i=s.options)||void 0===i?void 0:i.logLevel)>=2&&(u=d(o).map((function(e){return"0".concat(e.toString(16)).slice(-2)})).join(" "),console.log("log_id: %c".concat(a,"\n%crequest size: %c").concat(o.length," bytes\n%crequest body:\n%c").concat(u),"color: #0090FF","","color: #0090FF","","background-color: #004744; color: #A8F5E5")),ke(o,{url:null===(n=s.options)||void 0===n||null===(n=n.base)||void 0===n?void 0:n.url,retry:null==t?void 0:t.retry,logId:a});case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})}))}),[{key:"report",value:function(e,t,r,i){var n=this,o=function(){var o=Date.now();n.scheduler.add(Wt({type:e,spm:t,data:r,ts:o,options:i},{reporter:n}))};this.buvidInit?o():this.initBuvidPromise.then(o)}},{key:"flush",value:function(){this.scheduler.flush()}}])}();return Tt.use({tech:Qt}),Tt}));
